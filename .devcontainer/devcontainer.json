{
	"name": "Zeropoint Agent",
    "dockerFile": "../Dockerfile",
    "build": {
        "target": "develop"
    },
    "context": "..",
	"overrideCommand": true,
	"remoteUser": "vscode",
	"features": {
		"ghcr.io/devcontainers/features/node:1": {
			"version": "18.17.0"
		},
		"ghcr.io/devcontainers/features/docker-in-docker:2": {},
		"ghcr.io/nils-geistmann/devcontainers-features/create-remote-user:0": {
			"passwordLessSudo": true
		}
	},
	"customizations": {
        "vscode": {
            "settings": {
                "terminal.integrated.defaultProfile.linux": "bash"
			},
			"extensions": [
				"ms-python.python",
				"zaaack.markdown-editor",
				"ms-python.debugpy",
				"idered.npm",
				"msjsdiag.debugger-for-chrome"
			]
        }
    },
	"initializeCommand": "scripts/generate-defaults.sh ${localWorkspaceFolder}",
	"postCreateCommand": ". ${NVM_DIR}/nvm.sh && nvm install 18.17.0 && nvm use 18.17.0",
	"postAttachCommand": ". ${NVM_DIR}/nvm.sh && nvm use 18.17.0 && pip install -r requirements.txt && npm install --prefix webui",
	"mounts": [
		"source=/dev,target=/dev,type=bind,consistency=consistent"
	],
	"runArgs": [
		"--gpus", "all"
	],
	"forwardPorts": [2370],
	"portsAttributes": {
		"2370": {
			"label": "ZeroPoint Agent API + WebUI",
			"onAutoForward": "notify"
		}
	}
}